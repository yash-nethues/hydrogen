import{r as w,j as $}from"./components-CBM5eEXI.js";const X=w.forwardRef(({alt:e,aspectRatio:t,crop:i="center",data:n,decoding:r="async",height:u="auto",loader:g=p,loading:c="lazy",sizes:S,src:h,srcSetOptions:x={intervals:15,startingWidth:200,incrementSize:200,placeholderWidth:100},width:d="100%",...f},s)=>{const l=w.useMemo(()=>{const A=n!=null&&n.width&&(n!=null&&n.height)?n==null?void 0:n.width:void 0,R=n!=null&&n.width&&(n!=null&&n.height)?n==null?void 0:n.height:void 0;return{width:A,height:R,unitsMatch:!!N(A,R)}},[n]),o=w.useMemo(()=>{const R=M((d||"100%").toString()),T=`${R.number}${R.unit}`,F=u==null,E=F?null:M(u.toString()),k=E?`${E.number}${E.unit}`:"",v=F?"auto":k,B=h||(n==null?void 0:n.url),C=n!=null&&n.altText&&!e?n==null?void 0:n.altText:e||"",V=t||(l.unitsMatch?[y(l.width),y(l.height)].join("/"):void 0);return{width:T,height:v,src:B,alt:C,aspectRatio:V}},[d,u,h,n,e,t,l,f==null?void 0:f.key]),{intervals:j,startingWidth:m,incrementSize:H,placeholderWidth:b}=x,W=w.useMemo(()=>J(d,j,m,H),[d,j,m,H]);return U(o.width)?$.jsx(q,{aspectRatio:t,crop:i,decoding:r,height:u,imageWidths:W,loader:g,loading:c,normalizedProps:o,passthroughProps:f,ref:s,width:d,data:n}):$.jsx(G,{aspectRatio:t,crop:i,decoding:r,imageWidths:W,loader:g,loading:c,normalizedProps:o,passthroughProps:f,placeholderWidth:b,ref:s,sizes:S,data:n})}),q=w.forwardRef(({aspectRatio:e,crop:t,decoding:i,height:n,imageWidths:r,loader:u=p,loading:g,normalizedProps:c,passthroughProps:S,width:h,data:x},d)=>{const f=w.useMemo(()=>{const s=y(h),l=y(n),o=e||(N(c.width,c.height)?[s,l].join("/"):c.aspectRatio?c.aspectRatio:void 0),j=r===void 0?void 0:O(r,o,t,{width:(x==null?void 0:x.width)??void 0,height:(x==null?void 0:x.height)??void 0}),m=l||(o&&s?s*(I(o)??1):void 0),H=_(c.src,j,u),b=u({src:c.src,width:s,height:m,crop:c.height==="auto"?void 0:t});return{width:s,aspectRatio:o,height:m,srcSet:H,src:b}},[e,t,x,n,r,u,c,h]);return $.jsx("img",{ref:d,alt:c.alt,decoding:i,height:f.height,loading:g,src:f.src,srcSet:f.srcSet,width:f.width,style:{aspectRatio:f.aspectRatio,...S.style},...S})}),G=w.forwardRef(({crop:e,decoding:t,imageWidths:i,loader:n=p,loading:r,normalizedProps:u,passthroughProps:g,placeholderWidth:c,sizes:S,data:h},x)=>{const d=w.useMemo(()=>{const f=i===void 0?void 0:O(i,u.aspectRatio,e,{width:(h==null?void 0:h.width)??void 0,height:(h==null?void 0:h.height)??void 0}),s=u.aspectRatio&&c?c*(I(u.aspectRatio)??1):void 0,l=_(u.src,f,n),o=n({src:u.src,width:c,height:s,crop:e});return{placeholderHeight:s,srcSet:l,src:o}},[e,h,i,n,u,c]);return $.jsx("img",{ref:x,alt:u.alt,decoding:t,height:d.placeholderHeight,loading:r,sizes:S,src:d.src,srcSet:d.srcSet,width:c,...g,style:{width:u.width,aspectRatio:u.aspectRatio,...g.style}})}),L="https://placeholder.shopify.com";function p({src:e,width:t,height:i,crop:n}){if(!e)return"";const r=new URL(e,L);return t&&r.searchParams.append("width",Math.round(t).toString()),i&&r.searchParams.append("height",Math.round(i).toString()),n&&r.searchParams.append("crop",n),r.href.replace(L,"")}function N(e="100%",t="auto"){return M(e.toString()).unit===M(t.toString()).unit}function M(e){const t=e.replace(/[0-9.]/g,""),i=parseFloat(e.replace(t,""));return{unit:t===""?i===void 0?"auto":"px":t,number:i}}function y(e){if(e===void 0)return;const{unit:t,number:i}=M(e.toString());switch(t){case"em":return i*16;case"rem":return i*16;case"px":return i;case"":return i;default:return}}function U(e){return typeof e=="number"||/\d(px|em|rem)$/.test(e)}function _(e,t,i=p){return e?(t==null?void 0:t.length)===0||!t?e:t.map((n,r)=>`${i({src:e,width:n.width,height:n.height,crop:n.crop})} ${t.length===3?`${r+1}x`:`${n.width??0}w`}`).join(", "):""}function J(e="100%",t,i,n){const r=Array.from({length:t},(g,c)=>c*n+i),u=Array.from({length:3},(g,c)=>(c+1)*(y(e)??0));return U(e)?u:r}function I(e){if(!e)return;const[t,i]=e.split("/");return 1/(Number(t)/Number(i))}function O(e,t,i="center",n){if(e)return e.map(r=>({width:r,height:t?r*(I(t)??1):void 0,crop:i})).filter(({width:r,height:u})=>!(n!=null&&n.width&&r>n.width||n!=null&&n.height&&u&&u>n.height))}export{X as I};
